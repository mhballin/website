---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { projects } from "../../data/projects";
import { Image } from "astro:assets";
import ImageModal from "../../components/ImageModal.astro";

export function getStaticPaths() {
  return projects.map((project) => ({
    params: { projectId: project.id },
    props: { project },
  }));
}

interface Props {
  project: (typeof projects)[0];
}

const { project } = Astro.props;
---

<BaseLayout title={project.title} sideBarActiveItemID="work">
  <ImageModal />

  <div class="pb-8">
    <a href="/work" class="text-primary hover:underline mb-4 inline-block">
      ‚Üê Back to Projects
    </a>

    <h1 class="text-4xl font-bold mb-4">{project.title}</h1>

    <div class="flex flex-wrap gap-2 mb-6">
      {project.tags.map((tag) => <span class="badge badge-outline">{tag}</span>)}
    </div>

    <p class="text-lg text-gray-700 mb-8 max-w-2xl">{project.description}</p>
  </div>

  <!-- Gallery section -->
  <div class="space-y-6">
    <h2 class="text-2xl font-bold">Project Gallery</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {
        project.images.map((image, index) => (
          <div class="aspect-square overflow-hidden rounded-lg bg-gray-100 cursor-pointer group">
            <Image
              src={image}
              width={400}
              height={400}
              format="webp"
              alt={`${project.title} - Image ${index + 1}`}
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 project-gallery-image"
              data-index={index}
              data-images={project.images.join(",")}
              onclick={`window.openImageModal(${JSON.stringify(project.images)}, ${index})`}
            />
          </div>
        ))
      }
    </div>
  </div>

  <div class="divider my-12"></div>

  <!-- Additional project info can go here -->
  <div class="space-y-4">
    <h2 class="text-2xl font-bold">Project Details</h2>
    <p class="text-gray-700">
      Additional project information, specifications, and technical details can be added here.
    </p>
  </div>
</BaseLayout>
