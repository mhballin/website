---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ProjectGrid from "../../components/ProjectGrid.astro";
import { projects, type ProjectCategory } from "../../data/projects";

export function getStaticPaths() {
  const categories: ProjectCategory[] = ["blueprint", "making", "creative"];
  return categories.map((category) => ({
    params: { category },
    props: { category },
  }));
}

interface Props {
  category: ProjectCategory;
}

const { category } = Astro.props;
const categoryProjects = projects.filter((p) => p.category === category);

const categoryLabels: Record<ProjectCategory, { name: string; description: string }> = {
  blueprint: {
    name: "Blueprint",
    description: "Startup & professional projects involving product development and innovation.",
  },
  making: {
    name: "Making",
    description: "Personal builds, prototypes, and experimental projects exploring new materials and techniques.",
  },
  creative: {
    name: "Creative",
    description: "Design and visual work including photography, web design, and artistic projects.",
  },
};

const categoryInfo = categoryLabels[category];
---

<BaseLayout title={`Work - ${categoryInfo.name}`} sideBarActiveItemID="work">
  <!-- Back navigation -->
  <div class="mb-8">
    <a href="/work" class="text-primary hover:underline inline-flex items-center gap-2">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Back to Categories
    </a>
  </div>

  <div class="pb-8">
    <div class="text-3xl w-full font-bold mb-2">{categoryInfo.name}</div>
    <div class="text-lg text-gray-600 mb-5">{categoryInfo.description}</div>
  </div>

  <ProjectGrid projects={categoryProjects} category={category} />
</BaseLayout>
